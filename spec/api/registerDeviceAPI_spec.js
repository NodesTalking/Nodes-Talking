/**
 /$$$$$$$                      /$$             /$$                               /$$$$$$$                       /$$                            /$$$$$$  /$$$$$$$  /$$$$$$       /$$$$$$$$                    /$$
| $$__  $$                    |__/            | $$                              | $$__  $$                     |__/                           /$$__  $$| $$__  $$|_  $$_/      |__  $$__/                   | $$
| $$  \ $$  /$$$$$$   /$$$$$$  /$$  /$$$$$$$ /$$$$$$    /$$$$$$   /$$$$$$       | $$  \ $$  /$$$$$$  /$$    /$$ /$$  /$$$$$$$  /$$$$$$       | $$  \ $$| $$  \ $$  | $$           | $$  /$$$$$$   /$$$$$$$ /$$$$$$
| $$$$$$$/ /$$__  $$ /$$__  $$| $$ /$$_____/|_  $$_/   /$$__  $$ /$$__  $$      | $$  | $$ /$$__  $$|  $$  /$$/| $$ /$$_____/ /$$__  $$      | $$$$$$$$| $$$$$$$/  | $$           | $$ /$$__  $$ /$$_____/|_  $$_/
| $$__  $$| $$$$$$$$| $$  \ $$| $$|  $$$$$$   | $$    | $$$$$$$$| $$  \__/      | $$  | $$| $$$$$$$$ \  $$/$$/ | $$| $$      | $$$$$$$$      | $$__  $$| $$____/   | $$           | $$| $$$$$$$$|  $$$$$$   | $$
| $$  \ $$| $$_____/| $$  | $$| $$ \____  $$  | $$ /$$| $$_____/| $$            | $$  | $$| $$_____/  \  $$$/  | $$| $$      | $$_____/      | $$  | $$| $$        | $$           | $$| $$_____/ \____  $$  | $$ /$$
| $$  | $$|  $$$$$$$|  $$$$$$$| $$ /$$$$$$$/  |  $$$$/|  $$$$$$$| $$            | $$$$$$$/|  $$$$$$$   \  $/   | $$|  $$$$$$$|  $$$$$$$      | $$  | $$| $$       /$$$$$$         | $$|  $$$$$$$ /$$$$$$$/  |  $$$$/
|__/  |__/ \_______/ \____  $$|__/|_______/    \___/   \_______/|__/            |_______/  \_______/    \_/    |__/ \_______/ \_______/      |__/  |__/|__/      |______/         |__/ \_______/|_______/    \___/
                     /$$  \ $$
                    |  $$$$$$/
                     \______/
**/

var frisby = require('frisby')
    ,Registration = require('../../models/registration')

var id = Math.floor(Math.random()*1000001)
var regInstance = new Registration({'data.message.node.nodeId':'server@'+id})
if(regInstance == undefined) console.log('reg is undefined')

console.log('regInstance: ' + JSON.stringify(regInstance))

frisby.create('Register Device')
    .post('http://localhost:3000/register', {
        data : regInstance
    }, {json:true})
    .expectStatus(200)
    .expectHeaderContains('Content-Type','json')
    .expectJSON({
        result: 'Ok'
    })
.toss()




